# Программа шифрует заданную строку s (длиной не более 1430 букв, можно русские буквы) функцией XOR
import random
def to_crypto(s : str, key : int) -> str:
    news = ''
    for c in s:
        # Перенос русской кодировки символов в кодировку до 255
        # "А" с кодом 1040 - получаем 168
        # "Я" с кодом 1071 - получаем 199
        # "а" с кодом 1072 - получаем 200
        # "я" с кодом 1103 - получаем 231
        if ord(c) > 255:
            code = ord(c) - 1000 + 128
        else:
            code = ord(c)
        # выравниваем длину кода до 3-х цифр, добавляя "0" впереди:
        if len(str(code)) < 3:
            sym = '0' + str(code)
        else:
            sym = str(code)
        news = news + sym
    if news[0] == '0':
        news = '9' + news[1::]
    open = int(news)
    #print('Исходный текст в символах: ', s)
    #print('Исходный текст в кодах ASCII, выровненный до трех символов на код, с заменой первого символа на 9:', open)
    work_key = int(str(key)[:len(news):])
    #print('Key to_crypt: ', work_key)
    return(str(open ^ work_key))

def from_crypto(s : str, key : int) -> str:
    work_key = int(str(key)[:len(s):])
    #print('Key from_crypt: ', work_key)
    unc = int(s) ^ work_key
    #print('Расшифрованный текст', unc)
    if int(str(unc)[:3:]) > 255:
        tmp = '0' + str(unc)[1::]
    else:
        tmp = str(unc)
    s = ''
    while len(tmp) > 0:
        if tmp[0] == '0':
            s = s + chr(int(tmp[1:3:]))
            tmp = tmp[3::]
        else:
            if int(tmp[:3:]) > 128:
                n = int(tmp[:3:]) - 128 + 1000
            else:
                n = int(tmp[:3:])
            s = s + chr(int(n))
            tmp = tmp[3::]
    #print('Получился текст: ', s)
    return(s)

def key_gen(length: int):
    n = ''
    while len(n) < length:
        n = n + str(random.randint(100 ** 10, 1000 ** 10))
    key = n[:length:]
    #print(key)
    
# key_gen(4300)
# сгенерирован ключ длиной 4300
key = int(6711905691972087312183798619127200178699941154101561707382512870077063595665886505849564295192236632804522584058647952388103844724958732470988087641682770344830349784406317302309499718611261265012755138318858634926326914975659250538961469861741346164983977996110500581216979893504148769903392776910781214162200723078789561661298218838291116113221572820852278895557513452878225721670418811391964720109511072386097025795239816185764030910425423334225695834732326011046042974427686235331390116147873235236651719944741418054889962638912730798476494630195118362958827533588248714007134083406713203764721342887544081798650100945796414142853004707095092736178239715375877724833097934248727309170089033187423457187773693700324455502708318695232150139713479347124188182509924840111020142099475722497863576051131555858350449186496061551353410098238772224790791728003733810968911249187003938606563923097484148221564046412253603947601681380225165505302798945507105648582995392143640223219586162586402494537767365929996841670620204060154335019186204733166778279817526906991511390751142496436542613714793711535688033307534729494390686900080944571668453261107012584806901342352595762946831948156958138117054730711197737272357472556039562778350958820055711616618447008722586760691421989822915677646975056171125836563169456317485564173906493015287033795796033939240829387140594167838186028132936803687487497361131082095866027845326631069278706512094272620574263895385612077897926563876080491989766528008305392354861765789511972689312087508724296911250131216993574999408525714638400419723478857223043543163009579310124238039281499566052941457159488856082381815793474186824942879441220924254691589305680291949229111833478500080883071179382018991487115739067596868126381062929552537053223959514530017006465832802896540638731475683113533467786059373829921218231096478015019233449926131432344432124854491308124219132152787826444785464313269838386620374363110453723229797628960489372215192700588191309042924223767543133315367217187201966095337828522020328568312296476283212443859610624565832521933432136493568270845737398046442310554620574236216727673518132873691025605078123643912429351655695536357430213575624590306849001677631320227033290517537415191090093891516964330613378457062117743300155988189584331045017026548499529776398867539383297017598186093205663595026088292787237603858680982518608771424195377685106589501679649566060413975382690443798136564709230854943512823014865617098607582617835347098896216168003499477492660026571070974971722342858738977219908525117057958998011247757055450561260558629370293615563033772513489636544799824166127354666262927082209615002087474984098024937966575393638203618323767299744415918536671352887026173589633617746785549240290123188790887958049048859294891766021482584792957740233229867891939907636528640557453095493218961490711476122273972109261474205959388019252618851949214113730453731158750573329594587979992602719859131449629414724171729983168856745286752924124518724995774513707391595167996984247331986444419802979134122284783199051672252453058150803114261196296786387370142252367797381226477508453319758653083284720503863909631483292785286825139466422499288186284620087497163513861799352273877565843917221979217222533541320007008794243072085570882508000606736685383899686149560308864122387920624273669837867318610821994825731182877472637135552669400705650104352191458350101312870962892054724440699114037548675617262027542580502351844771389352951362078053918364198004271203928959629693984481863064499598513372661060673099472997401529095810659644134847014798314274821650978995738765995336808864424088916301080740663420388214284337247011378652062268798834209032451080223473748298931784718163479190898006529973713532216842169422397382889257535310941929956754646889563106733280700210220028808799936510849008407258990459721283953579240014877241171358520380591923717993996041685619475979240690015846905376270991472824373009125742405617647227261028774046189822062185106376446049810678255272714972533816719285312869276584059521852407064530692093399081981244549042382269768054920610106465906719382636394154883503955698403725751807993940078046747228320361410934057856469842388050453310631481574772929640915309760468473127520942826732017990592203994563183960924679727280098942742358138)
# Это строка с текстом, которую требуется зашифровать
s = 'Попробуем русский текст, English, !@#$%^&*()_+{}[]:;"-.?<>`~ 1234567890!'

print('Исходный текст в символах: ', s, ',   длиной: ', len(s))
crypt_text = to_crypto(s, key)
uncrypt_text = from_crypto(crypt_text, key)
print('Расшифрованный текст:      ', uncrypt_text)
print('Зашифрованный текст: ', crypt_text, ',  длиной: ', len(crypt_text))

if s == uncrypt_text:
    print('Исходный и расшифрованный тексты совпадают!')
else:
    print('Ошибка: Исходный и расшифрованный тексты НЕ СОВПАЛИ!')
